{
  "id": "danfojs-plotting-showcase",
  "name": "Danfo.js Plotting Showcase",
  "description": "Comprehensive example demonstrating DOM output capabilities with both outEl container and output() function",
  "reactiveValues": [],
  "formulas": [],
  "cells": [
    {
      "id": "setup-danfojs",
      "type": "code",
      "code": "// Use injected danfojs module (no require needed)\n// dfd is automatically available\n\n// Create sample sales data\nconst salesData = {\n  month: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  revenue: [45000, 52000, 48000, 61000, 55000, 67000, 73000, 69000, 58000, 62000, 71000, 78000],\n  costs: [32000, 38000, 35000, 42000, 39000, 47000, 51000, 48000, 41000, 44000, 50000, 54000],\n  customers: [450, 520, 480, 610, 550, 670, 730, 690, 580, 620, 710, 780]\n};\n\n// Export the DataFrame and data for other cells to use\nexports.df = new dfd.DataFrame(salesData);\nexports.salesData = salesData; // Export raw data object\nconsole.log('Sales DataFrame created:');\nconsole.log(exports.df);\n\n// Calculate profit and profit margin (immutable operations)\nexports.salesDataFrame = exports.df\n  .addColumn('profit', exports.df['revenue'].sub(exports.df['costs']), { inplace: false })\n  .addColumn('profit_margin', exports.df['revenue'].sub(exports.df['costs']).div(exports.df['revenue']).mul(100), { inplace: false });\n\nconsole.log('\\nDataFrame with calculated fields:');\nconsole.log(exports.salesDataFrame);"
    },
    {
      "id": "dom-output-demo",
      "type": "code",
      "code": "// Method 1: Create Danfo.js bar chart using output()\n\nconst createChart1 = () => {\n  const container = createContainer({\n    style: 'border: 2px solid var(--color-success);'\n  });\n  \n  const title = createTitle('📊 Method 1: Danfo.js Bar Chart via output()');\n  container.appendChild(title);\n  \n  // Create plot container with unique ID\n  const plotDiv = createDiv({\n    style: 'width: 100%; height: 400px; margin: 10px 0;'\n  });\n  container.appendChild(plotDiv);\n  \n  // Use Danfo.js to create bar chart\n  try {\n    salesDataFrame.plot(plotDiv.id).bar({\n      x: 'month',\n      y: 'revenue',\n      config: {\n        displayModeBar: false,\n        responsive: true\n      },\n      layout: {\n        title: 'Monthly Revenue',\n        xaxis: { title: 'Month' },\n        yaxis: { title: 'Revenue ($)' },\n        showlegend: false,\n        plot_bgcolor: 'rgba(0,0,0,0)',\n        paper_bgcolor: 'rgba(0,0,0,0)'\n      }\n    });\n    \n    console.log('✅ Danfo.js bar chart created successfully using output()!');\n    \n  } catch (error) {\n    console.error('Error creating Danfo.js bar chart:', error);\n    plotDiv.innerHTML = `<div style=\"padding: 20px; text-align: center; color: var(--color-error);\">Error: ${error.message}</div>`;\n  }\n  \n  return container;\n};\n\n// Output the container with Danfo.js chart\noutput(createChart1());\n\nconsole.log('Bar chart created using Danfo.js plot().bar() method');"
    },
    {
      "id": "direct-dom-demo",
      "type": "code",
      "code": "// Method 2: Create Danfo.js line charts using auto-outputting containers\n\n// First chart: Profit margin line chart\nconst profitMarginContainer = createContainer({\n  style: 'border: 2px solid var(--color-info);'\n});\n\nconst title = createTitle('📈 Method 2: Danfo.js Line Chart via Auto-Container');\nprofitMarginContainer.appendChild(title);\n\n// Create plot container with unique ID\nconst plotDiv = createDiv({\n  style: 'width: 100%; height: 400px; margin: 10px 0;'\n});\nprofitMarginContainer.appendChild(plotDiv);\n\n// Use Danfo.js to create line chart for profit margins\ntry {\n  salesDataFrame.plot(plotDiv.id).line({\n    x: 'month',\n    y: 'profit_margin',\n    config: {\n      displayModeBar: false,\n      responsive: true\n    },\n    layout: {\n      title: 'Monthly Profit Margin (%)',\n      xaxis: { title: 'Month' },\n      yaxis: { title: 'Profit Margin (%)' },\n      showlegend: false,\n      plot_bgcolor: 'rgba(0,0,0,0)',\n      paper_bgcolor: 'rgba(0,0,0,0)'\n    }\n  });\n  \n  console.log('✅ Danfo.js line chart created successfully using auto-container!');\n  \n} catch (error) {\n  console.error('Error creating Danfo.js line chart:', error);\n  plotDiv.innerHTML = `<div style=\"padding: 20px; text-align: center; color: var(--color-error);\">Error: ${error.message}</div>`;\n}\n\n// Second chart: Multi-line chart showing profit vs costs\nconst profitCostsContainer = createContainer({\n  style: 'border: 2px solid var(--color-warning);'\n});\n\nconst secondTitle = createTitle('💰 Profit vs Costs Comparison', 4);\nprofitCostsContainer.appendChild(secondTitle);\n\nconst secondPlotDiv = createDiv({\n  style: 'width: 100%; height: 400px; margin: 10px 0;'\n});\nprofitCostsContainer.appendChild(secondPlotDiv);\n\n// Create multi-line chart\ntry {\n  salesDataFrame.plot(secondPlotDiv.id).line({\n    x: 'month',\n    y: ['profit', 'costs'],\n    config: {\n      displayModeBar: false,\n      responsive: true\n    },\n    layout: {\n      title: 'Monthly Profit vs Costs',\n      xaxis: { title: 'Month' },\n      yaxis: { title: 'Amount ($)' },\n      plot_bgcolor: 'rgba(0,0,0,0)',\n      paper_bgcolor: 'rgba(0,0,0,0)'\n    }\n  });\n  \n  console.log('✅ Multi-line chart created successfully!');\n  \n} catch (error) {\n  console.error('Error creating multi-line chart:', error);\n  secondPlotDiv.innerHTML = `<div style=\"padding: 20px; text-align: center; color: var(--color-error);\">Error: ${error.message}</div>`;\n}\n\nconsole.log('All charts created using Danfo.js plotting methods with auto-outputting containers');"
    },
    {
      "id": "interactive-table",
      "type": "code",
      "code": "// Create an interactive table using simplified DOM helpers\n\n// Method 1: Use auto-outputting container (much simpler!)\nconst container = createContainer();\nconst title = createTitle('📊 Interactive Sales Data Table');\ncontainer.appendChild(title);\n\n// Create container for the Danfo.js table with auto-generated ID\nconst plotDiv = createDiv({\n  style: 'width: 100%; overflow-x: auto;'\n});\ncontainer.appendChild(plotDiv);\n\n// Now Danfo.js can find the element since container was auto-output\ntry {\n  // Display the DataFrame as an interactive table using the auto-generated ID\n  salesDataFrame.plot(plotDiv.id).table();\n  \n  console.log('✅ Interactive Danfo.js table created successfully!');\n  \n} catch (error) {\n  console.error('Error creating Danfo.js table:', error);\n  \n  // Show error message using helper\n  const errorDiv = createDiv({\n    style: 'padding: 20px; text-align: center; color: var(--color-error); background: var(--color-background-error); border: 1px solid var(--color-error); border-radius: 4px;',\n    innerHTML: `\n      <h4>Danfo.js Table Error</h4>\n      <p>Unable to create interactive table: ${error.message}</p>\n      <p><small>DataFrame shape: ${salesDataFrame.shape[0]} rows × ${salesDataFrame.shape[1]} columns</small></p>\n    `\n  });\n  plotDiv.appendChild(errorDiv);\n}\n\n// Add info using helper list with minimal styling\nconst infoTitle = createTitle('💡 DataFrame Info', 4);\ncontainer.appendChild(infoTitle);\n\nconst infoList = createList([\n  `📈 ${salesDataFrame.shape[0]} rows × ${salesDataFrame.shape[1]} columns`,\n  '🔍 Includes calculated profit and margin fields',\n  '💰 Financial data with proper formatting',\n  '📊 Uses Danfo.js .plot().table() method'\n]);\ncontainer.appendChild(infoList);\n\n// Method 2: Show summary statistics using styled gradient container\nconst statsContainer = createOutElGradientContainer('📊 Quick Statistics');\n\n// Get basic statistics from the DataFrame\nconst stats = {\n  '💰 Total Revenue': `$${salesDataFrame['revenue'].sum().toLocaleString()}`,\n  '📈 Total Profit': `$${salesDataFrame['profit'].sum().toLocaleString()}`,\n  '📊 Avg Margin': `${salesDataFrame['profit_margin'].mean().toFixed(1)}%`,\n  '🏆 Best Month': `$${salesDataFrame['revenue'].max().toLocaleString()}`,\n  '📉 Worst Month': `$${salesDataFrame['revenue'].min().toLocaleString()}`,\n  '🎯 Profit Ratio': `${(salesDataFrame['profit'].sum()/salesDataFrame['revenue'].sum()*100).toFixed(1)}%`\n};\n\n// Create key-value grid with minimal styling (using enhanced defaults)\nconst statsGrid = createKeyValueGrid(stats);\nstatsContainer.appendChild(statsGrid);\n\n// Add a features list using the new createList helper with defaults\nconst featuresTitle = createTitle('✨ DOM Helper Features', 4);\nstatsContainer.appendChild(featuresTitle);\n\nconst featuresList = createList([\n  'DOM helpers for seamless integration',\n  'Responsive key-value grids for metrics display',\n  'Styled lists with customizable item formatting',\n  'Theme-aware colors using CSS custom properties',\n  'Built-in error handling and fallback displays',\n  'Enhanced defaults reduce styling overhead'\n]);\nstatsContainer.appendChild(featuresList);\n\n// Manual output to display the statistics container\noutput(statsContainer);\n\nconsole.log('🎉 DataFrame display completed using DOM helpers with manual output!');"
    }
  ]
}