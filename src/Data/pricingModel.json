{
  "title": "Pricing Calculator",
  "description": "Calculate total pricing with discounts",
  "reactiveValues": [
    {
      "name": "price",
      "defaultValue": 100,
      "type": "number"
    },
    {
      "name": "quantity",
      "defaultValue": 1,
      "type": "number"
    },
    {
      "name": "discountPercent",
      "defaultValue": 0,
      "type": "number"
    }
  ],
  "formulas": [
    {
      "name": "subtotal",
      "formula": "$price * $quantity"
    },
    {
      "name": "discount",
      "formula": "$subtotal * ($discountPercent / 100)"
    },
    {
      "name": "total",
      "formula": "$subtotal - $discount"
    }
  ],
  "cells": [
    {
      "type": "markdown",
      "id": "header",
      "content": "<h2>Pricing Calculator</h2><p>Configure your pricing parameters below:</p>"
    },
    {
      "type": "input",
      "id": "price-input",
      "label": "Price ($)",
      "inputType": "number",
      "variableName": "price",
      "defaultValue": 100,
      "props": {
        "min": 0,
        "step": 0.01
      }
    },
    {
      "type": "input",
      "id": "quantity-input",
      "label": "Quantity",
      "inputType": "number",
      "variableName": "quantity",
      "defaultValue": 1,
      "props": {
        "min": 1,
        "step": 1
      }
    },
    {
      "type": "input",
      "id": "discount-input",
      "label": "Discount (%)",
      "inputType": "range",
      "variableName": "discountPercent",
      "defaultValue": 0,
      "props": {
        "min": 0,
        "max": 100,
        "step": 1
      }
    },
    {
      "type": "markdown",
      "id": "results-header",
      "content": "<h3>Results:</h3>"
    },
    {
      "type": "markdown",
      "id": "subtotal-display",
      "content": "**Subtotal:** ${{subtotal | round,2}}",
      "variables": ["subtotal"]
    },
    {
      "type": "markdown",
      "id": "discount-display",
      "content": "**Discount:** ${{discount | round,2}}",
      "variables": ["discount"]
    },
    {
      "type": "markdown",
      "id": "total-display",
      "content": "<h3>**Total:** {{total | currency}}</h3>",
      "variables": ["total"]
    },
    {
      "type": "code",
      "id": "tax-calculation",
      "code": "// Calculate tax with variable reassignment and logging\nconsole.log('Starting tax calculation...');\n\nexport let taxRate = 0.08; // Start with 8%\nexport const initialTaxAmount = total * taxRate;\n\nconsole.log('Initial calculation:', { total, taxRate, initialTaxAmount });\n\n// Reassign tax rate based on total amount\nif (total > 500) {\n    taxRate = 0.10; // Luxury tax for high amounts\n    console.log('Luxury tax rate applied: 10%');\n} else if (total > 200) {\n    taxRate = 0.085; // Slightly higher for medium amounts\n    console.log('Medium tax rate applied: 8.5%');\n} else {\n    console.log('Standard tax rate maintained: 8%');\n}\n\n// Recalculate with new rate\nexport const finalTaxAmount = total * taxRate;\nexport const finalTotal = total + finalTaxAmount;\n\nconsole.log('Final calculation:', { \n    total, \n    taxRate: `${(taxRate * 100).toFixed(1)}%`, \n    finalTaxAmount, \n    finalTotal \n});\n\nconsole.info('Tax calculation completed successfully!');",
      "exports": ["taxRate", "finalTaxAmount", "finalTotal"]
    },
    {
      "type": "markdown",
      "id": "tax-display",
      "content": "**Tax ({{taxRate | percent}}):** {{taxAmount | currency}}<br>**Final Total:** {{finalTotal | currency}}",
      "variables": ["taxRate", "taxAmount", "finalTotal"]
    }
  ]
}
