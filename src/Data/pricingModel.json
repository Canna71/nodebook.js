{
  "title": "Pricing Calculator",
  "description": "Calculate total pricing with discounts",
  "reactiveValues": [
    {
      "name": "price",
      "defaultValue": 100,
      "type": "number"
    },
    {
      "name": "quantity",
      "defaultValue": 1,
      "type": "number"
    },
    {
      "name": "discountPercent",
      "defaultValue": 0,
      "type": "number"
    }
  ],
  "formulas": [
    {
      "name": "subtotal",
      "formula": "$price * $quantity"
    },
    {
      "name": "discount",
      "formula": "$subtotal * ($discountPercent / 100)"
    },
    {
      "name": "total",
      "formula": "$subtotal - $discount"
    }
  ],
  "cells": [
    {
      "type": "markdown",
      "id": "header",
      "content": "<h2>Pricing Calculator</h2><p>Configure your pricing parameters below:</p>"
    },
    {
      "type": "input",
      "id": "price-input",
      "label": "Price ($)",
      "inputType": "number",
      "variableName": "price",
      "defaultValue": 100,
      "props": {
        "min": 0,
        "step": 0.01
      }
    },
    {
      "type": "input",
      "id": "quantity-input",
      "label": "Quantity",
      "inputType": "number",
      "variableName": "quantity",
      "defaultValue": 1,
      "props": {
        "min": 1,
        "step": 1
      }
    },
    {
      "type": "input",
      "id": "discount-input",
      "label": "Discount (%)",
      "inputType": "range",
      "variableName": "discountPercent",
      "defaultValue": 0,
      "props": {
        "min": 0,
        "max": 100,
        "step": 1
      }
    },
    {
      "type": "markdown",
      "id": "results-header",
      "content": "<h3>Results:</h3>"
    },
    {
      "type": "markdown",
      "id": "subtotal-display",
      "content": "**Subtotal:** ${{subtotal | round,2}}",
      "variables": ["subtotal"]
    },
    {
      "type": "markdown",
      "id": "discount-display",
      "content": "**Discount:** ${{discount | round,2}}",
      "variables": ["discount"]
    },
    {
      "type": "markdown",
      "id": "total-display",
      "content": "<h3>**Total:** {{total | currency}}</h3>",
      "variables": ["total"]
    },
    {
      "type": "code",
      "id": "tax-calculation",
      "code": "// Calculate tax and final total\nconst taxRate = 0.08;\nconst totalBeforeTax = get('total');\nconst taxAmount = totalBeforeTax * taxRate;\nconst finalTotal = totalBeforeTax + taxAmount;\n\n// Export calculated values\nexport('taxAmount', taxAmount);\nexport('finalTotal', finalTotal);\nexport('taxRate', taxRate);",
      "exports": ["taxAmount", "finalTotal", "taxRate"]
    },
    {
      "type": "markdown",
      "id": "tax-display",
      "content": "**Tax ({{taxRate | percent}}):** {{taxAmount | currency}}<br>**Final Total:** {{finalTotal | currency}}",
      "variables": ["taxRate", "taxAmount", "finalTotal"]
    }
  ]
}
